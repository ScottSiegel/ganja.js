<HEAD>
  <SCRIPT SRC="../ganja.js"></SCRIPT>
  <SCRIPT SRC="../chroma.min.js"></SCRIPT>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../nouislider.min.css">
  <script src="../nouislider.min.js"></script>
  <script src="../wNumb.js"></script>
  <div class="Slider-Pane">
  <div id="slider1" class="sliderA"></div>
  <div id="slider2" class="sliderB"></div>
  <div id="slider3" class="sliderC"></div>
  <div id="slider4" class="sliderD"></div>
  <div id="slider5" class="sliderE"></div>
  </div>
  
  <p class="textA" id="textS1"></p>
  <p class="textB" id="textS2"></p>
  <p class="textC" id="textS3"></p>
  <p class="textD" id="textS4"></p>
  <p class="textE" id="textS5"></p>
  <p id='animatedGraph'></p> 
  <p class="debugText1" id="debugDetails1"></p>
  <p class="debugText2" id="debugDetails2"></p>
  
  <style>
div.sliderA {
  position: absolute;
  left: 10%;
  bottom: 5%;
  height: 30%;
}
div.sliderB {
  position: absolute;
  left: 25%;
  bottom: 5%;
  height: 30%;
}
div.sliderC {
  position: absolute;
  left: 40%;
  bottom: 5%;
  height: 30%;
}
div.sliderD {
  position: absolute;
  left: 55%;
  bottom: 5%;
  height: 30%;
}
div.sliderE {
  position: absolute;
  left: 70%;
  bottom: 5%;
  height: 30%;
}

p.textA {
  position: absolute;
  left: 7%;
  bottom: 36%;
  font-weight: bold;
} 
p.textB {
  position: absolute;
  bottom: 36%;
  left: 22%;
  font-weight: bold;
}
p.textC {
  position: absolute;
  bottom: 36%;
  left: 37%;
  font-weight: bold;
} 
p.textD {
  position: absolute;
  bottom: 36%;
  left: 52%;
  font-weight: bold;
}
p.textE {
  position: absolute;
  bottom: 36%;
  left: 67%;
  font-weight: bold;
}
p.debugText1 {
  position: absolute;
  top: 2%;
  left: 46%;
  font-weight: bold; 
  font-size:140%; 
} 
p.debugText2 {
  position: absolute;
  top: 5%;
  left: 46%;
  font-weight: bold;
  font-size:140%;  
} 
</style>

</HEAD>
<BODY>


<script>
var slider1 = document.getElementById('slider1');
var slider2 = document.getElementById('slider2');
var slider3 = document.getElementById('slider3');
var slider4 = document.getElementById('slider4');
// var slider5 = document.getElementById('slider5');
var CreateSlider = (sliderName,startnum,sliderTextID,sliderTitle) => {  noUiSlider.create(sliderName, {animate: true,
    start: Number(startnum),direction: 'rtl',orientation: 'vertical',
    tooltips: wNumb({decimals:1,suffix: '%'}),connect: [true,false],
    range: {'min': 0,'max': 100},behaviour: 'drag',
    pips: {mode: 'positions',values: [0, 25, 50, 75, 100],
      density: 5,format: wNumb({decimals:1,suffix: '%'})}});
      document.getElementById(String(sliderTextID)).innerHTML =String(sliderTitle);  
    }
    
    var CreateSliderBounds = (sliderName,startnum,sliderTextID,sliderTitle) => {  noUiSlider.create(sliderName, {animate: true,
        start: Number(startnum),direction: 'rtl',orientation: 'vertical',
        tooltips: wNumb({decimals:2}),connect: [true,true],
        range: {'min': -2,'max': 2},behaviour: 'drag',
        pips: {mode: 'positions',values: [0, 25, 50, 75, 100],
          density: 5,format: wNumb({decimals:2,})}});
          document.getElementById(String(sliderTextID)).innerHTML =String(sliderTitle);  
        }
    
CreateSlider(slider1,50,"textS1",'Camera Rot Speed')
CreateSliderBounds(slider2,0,"textS2",'Modify Cam Coord e01')
CreateSliderBounds(slider3,0,"textS3",'Modify Cam Coord e02')
CreateSliderBounds(slider4,0,"textS4",'Modify Cam Coord e03')
// CreateSlider(slider5,0,"textS5")

</script>
  <SCRIPT>
// Create a Clifford Algebra with 3,0,1 metric. 
Algebra(3,0,1,()=>{ 
  var asdf=this.describe();
  // Specify a point directly (trivectors specified with overloaded e-notation.)
  var Point = (x,y,z)=>-1e123+x*1e012+y*1e013+z*1e023,
      n = 600, camera=0e0;
  // Lines can be defined using plucker coordinates
  var Line = (px,py,pz,dx,dy,dz)=>px*1e01+py&1e02+pz*1e03+dx*1e12+dy*1e13+dz*1e23;
  var Plane = (a,b,c,d)=>d*1e0+a*1e1+b*1e2+c*1e3;
  
   var LineFromPoints= (P,Q)=>[P,Q]
  //sampling sphere
  var SphereSunflower = (i,n)=>{ i+=0.5; var t=Math.PI*(1+(5**0.5))*i, p=Math.acos(1-2*i/n);  return  Point(Math.cos(t)*Math.sin(p),Math.sin(t)*Math.sin(p),Math.cos(p))};
  
  var TransPtsAlongAxis = (x)=>{x.e013=x.e013+2; return x};
    
  var sphere1=[...Array(n)].map((x,i)=>SphereSunflower(i,n));
  
  
  var sphere1Colors = chroma.scale(['#fafa6e','#2A4858'])
  .mode('lch').colors(n,'num');
  var sphere1Result= sphere1Colors.reduce((r, a,i,sphere1Colors) => r.concat(a, sphere1[i]),[]);
  
  var sphere2=[...Array(n)].map((x,i)=>SphereSunflower(i,n)).map((x,i)=>TransPtsAlongAxis(x));

  var sphere2Colors = chroma.scale(['#fa1459','#5900ff'])
  .mode('lch').colors(n,'num');
  var sphere2Result= sphere2Colors.reduce((r, a,i,sphere2Colors) => r.concat(a, sphere2[i]),[]);
  
  
  var cameraPOV=0,
      cameraSetLoc=Math.cos(cameraPOV)+Math.sin(cameraPOV)*1e13,
      counter=0;
      
  var origPoint=Point(0,0,0),
    xAxisPosPoint=Point(1,0,0),
    yAxisPosPoint=Point(0,1,0),
    zAxisPosPoint=Point(0,0,1),
    testLine=[origPoint,xAxisPosPoint],
    xAxisLine=LineFromPoints(origPoint,xAxisPosPoint),
    yAxisLine=LineFromPoints(origPoint,yAxisPosPoint),
    zAxisLine=LineFromPoints(origPoint,zAxisPosPoint);
  
  document.getElementById("animatedGraph").appendChild(this.graph(()=>{
    counter+=(slider1.noUiSlider.get()/50)**2;
    cameraPOV=counter/120.0;
    //*(slider1.noUiSlider.get()/100)
    cameraSetLoc=Math.cos(cameraPOV)+Math.sin(cameraPOV)*1e13;
    // var mag=-1;
    // cameraSetLoc.e13=cameraSetLoc.e13+mag;
    slider1.noUiSlider.get()/100;
    
    cameraSetLoc.e01=slider2.noUiSlider.get();
    cameraSetLoc.e02=slider3.noUiSlider.get();
    cameraSetLoc.e03=slider4.noUiSlider.get();
    camera.set(cameraSetLoc)
     slider1.noUiSlider.on('slide')
    document.getElementById("debugDetails1").innerHTML ="Camera POV Coords:";
    document.getElementById("debugDetails2").innerHTML =cameraSetLoc.s.toFixed(2)+' + '+cameraSetLoc.e13.toFixed(2)+'e13'
      + ' + ' + cameraSetLoc.e01.toFixed(2)+'e01'
      + ' + ' + cameraSetLoc.e02.toFixed(2)+'e02'
      + ' + ' + cameraSetLoc.e03.toFixed(2)+'e03';

    return [...sphere1Result.concat(sphere2Result),0x000000,origPoint,'origin',0xFF0000,xAxisPosPoint,'x-axis', xAxisLine,0x0F3BFF,yAxisPosPoint,'y-axis',yAxisLine,0xFF8614,zAxisPosPoint,'z-axis',zAxisLine]
    
  },{camera,animate:true,gl:true,grid:true,height:"55%",width:"45%"}    
));

});


</SCRIPT>

</BODY>